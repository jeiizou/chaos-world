# 数据基础

> 概念解析: 数仓 & 数据湖 & 湖仓一体

## 数据仓库

数据仓库(Data Warehouse)是一种数据集合, 用于支持管理角色和信息的全局共享

- 面向主题(Subject Oriented)
- 集成(Integrated)
- 相对稳定(Non-Volatile)
- 反映历史变化(Time Variant)

业务累计的大量资料, 通过数仓理论所特有的资料存储架构, 系统化的进行分析整理, 比如: 联机分析处理(OLAP), 数据挖掘(Data Mining), 进而支持决策支持系统, 构建商业智能(BI)

**主题**: 指用户使用数仓进行决策时关心的重点方面,比如: 收入, 客户, 销售渠道. 面相主题, 就是值数仓内的信息是按主题进行组织的, 而不是按照业务功能进行组织的.

**集成**: 指数据仓库中的信息不是从各个业务系统重简单抽象出来的, 而是经过一系列加工, 整理和汇总的过程, 因此数仓中的信息是关于整个企业的一致的全局信息.

**随时间变化**: 仓库内的数据并不只是反映当前的状态, 而是记录了从过去某个时间到当前各个阶段的信息.

![image](/img/640.jpeg)

### 特点

- 高执行效率: 处理的数据量巨大, 分析周期一般以天为单位, 时效性要求较高
- 高数据质量: 进入数仓的数据一般需要清洗, 从而保证数仓提供的数据是准确的
- 高扩展: 提前考虑3~5年的业务发展需求
- 面向主题: 按一定的主题域进行组织

## 数据湖

数据湖(Data Lake)是一个存储企业的各种各样原始数据的大型仓库, 其中的数据可供存取, 处理, 分析以及传输.

数据湖是以其自然格式存储的数据的系统或者存储库, 通常是对象blob或者文件.

数据湖通常是企业所有数据的单一存储, 包括源系统数据的原始副本, 以及用于报告, 可视化分析, 机器学习等任务的转换数据.

数据湖可以包括来自关系型数据库的结构化数据, 半结构化数据(csv, 日志, XML, JSON), 非结构化数据(邮件, 文档, PDF)和二进制数据(图像, 视音频)

Hadoop是比较常见的数据湖技术.

### 特点

- 高保真: 原始数据完整
- 灵活性: 根据需求对原始数据进行加工
- 可管理: 管理数据源, 数据连接, 数据格式, 数据模式, 数据权限等
- 可追溯: 需要对数据的全生命周期进行管理, 包括数据的定义, 接入, 存储, 分析, 应用的全过程. 对其中任一数据可追溯, 能清楚的重现数据完整的产生过程和流动过程

### 湖仓一体

湖仓一体(Data Lakehouse), 旨在为企业提供一个统一的,可共享的数据底座, 避免传统的数据湖, 数据仓库之间的数据移动, 将原始数据, 加工清洗数据, 模型化数据一起存储在湖仓中.

- 即面向业务实现高并发, 精准化, 高性能的历史数据, 实时数据的查询服务, 又能承载分析报表, 批处理, 数据挖掘等分析业务.

#### 特点

1. 统一的数据管理: 保存两类数据: 原始数据 & 处理后的数据. 数据湖中的数据会不断的积累, 演化, 所以要具备数据&权限管理的能力
2. 多模态的存储引擎: 湖仓一体本身内置多模态的存储引擎, 支持可插拔的存储框架
3. 丰富的计算引擎: 提供批处理, 流式处理, 交互式分析到机器学习的各种计算引擎.
4. 数据全生命周期的管理: 同上

## 不同技术的对比

### 数据湖与数据仓库

数据仓库和数据湖是大数据架构的两种设计趋向. 根本分析是在对包括存储系统, 权限, 建模要求等方面的把控.

数据湖是通过开放底层文件的存储能力, 给数据入湖带来最大的灵活性. 进入数据湖的数据可以是结构化的, 也可以是半结构化的.

数据仓库则更加关注数据的使用效率, 大规模下的数据管理, 安全, 合规这样的企业级需求. 数据通过统一的服务接口入仓, 数据通常预先定义schema. 用户通过数据服务接口或者计算引擎访问分布式存储系统中的文件. 


### 数据库与数据仓库

数据库的特点是:

- 相对复杂的表格结构, 存储结构紧致, 冗余数据少
- 读写都有优化
- 相对简单的读写查询, 单次作用于相对的少量数据

数据仓库的特点是: 

- 相对简单的表格结构, 存储结构松散, 冗余数据多
- 一般只有读优化
- 相对复杂的read query, 单次作用域相对大量的数据